{"version":3,"sources":["Navigator.js"],"names":["Navigator","_registry","layout","routes","initialPath","path","hasIndex","elRoutes","map","node","redirectTo","name","component","RootNavigator","onLocationChange","props","isInitial","location","current"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEA,MAAMA,SAAS,GAAG,CAAC;AAAEC,EAAAA,SAAF;AAAaC,EAAAA,MAAb;AAAqBC,EAAAA,MAArB;AAA6BC,EAAAA,WAA7B;AAA0CC,EAAAA,IAAI,GAAG;AAAjD,CAAD,KAA4D;AAC1E,MAAIC,QAAQ,GAAG,KAAf;AAEA,QAAMC,QAAQ,GAAGJ,MAAM,CAACK,GAAP,CAAYC,IAAD,IAAU;AAClC,QAAIA,IAAI,CAACJ,IAAL,KAAc,GAAlB,EAAuB;AACnBC,MAAAA,QAAQ,GAAG,IAAX;AACH;;AAED,QAAIG,IAAI,CAACN,MAAT,EAAiB;AACb,0BACI,6BAAC,SAAD;AAAW,QAAA,SAAS,EAAEF,SAAtB;AAAiC,QAAA,GAAG,EAAEQ,IAAI,CAACJ;AAA3C,SAAqDI,IAArD,EADJ;AAGH;;AAED,wBACI,6BAAC,qBAAD;AACI,MAAA,GAAG,EAAEA,IAAI,CAACJ,IADd;AAEI,MAAA,IAAI,EAAEI,IAAI,CAACJ,IAFf;AAGI,MAAA,OAAO,EACHI,IAAI,CAACC,UAAL,gBACI,6BAAC,QAAD;AAAU,QAAA,EAAE,EAAED,IAAI,CAACC;AAAnB,QADJ,gBAGI,6BAAC,yBAAD;AACI,QAAA,KAAK,EAAED,IAAI,CAACE,IAAL,IAAaF,IAAI,CAACG,SAD7B;AAEI,QAAA,SAAS,EAAEX;AAFf;AAPZ,MADJ;AAgBH,GA3BgB,CAAjB;AA6BA,SAAOC,MAAM,gBACT,6BAAC,qBAAD;AACI,IAAA,IAAI,EAAEG,IADV;AAEI,IAAA,OAAO,eAAE,6BAAC,yBAAD;AAAmB,MAAA,KAAK,EAAEI,IAAI,CAACE,IAAL,IAAaT,MAAvC;AAA+C,MAAA,SAAS,EAAED;AAA1D;AAFb,KAIKM,QAJL,EAKK,CAACD,QAAD,IAAaF,WAAb,iBACG,6BAAC,qBAAD;AACI,IAAA,IAAI,EAAC,GADT;AAEI,IAAA,OAAO,eAAE,6BAAC,QAAD;AAAU,MAAA,EAAE,EAAEA,WAAd;AAA2B,MAAA,OAAO;AAAlC;AAFb,IANR,CADS,gBAcT,4DAAGG,QAAH,CAdJ;AAgBH,CAhDD;;AAkDO,MAAMM,aAAa,GAAG,CAAC;AAAEC,EAAAA,gBAAF;AAAoB,KAAGC;AAAvB,CAAD,KAAoC;AAC7D,QAAMC,SAAS,GAAG,mBAAO,IAAP,CAAlB;AACA,QAAMC,QAAQ,GAAG,kCAAjB;AAEA,wBAAU,MAAM;AACZH,IAAAA,gBAAgB,IAAIA,gBAAgB,CAACG,QAAD,EAAWD,SAAS,CAACE,OAArB,CAApC;;AACA,QAAIF,SAAS,CAACE,OAAd,EAAuB;AACnBF,MAAAA,SAAS,CAACE,OAAV,GAAoB,KAApB;AACH;AACJ,GALD,EAKG,CAACD,QAAD,EAAWH,gBAAX,CALH;AAOA,sBACI,6BAAC,sBAAD,qBACI,6BAAC,SAAD,EAAeC,KAAf,CADJ,CADJ;AAKH,CAhBM;;;eAkBQf,S","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { Routes, Route, useLocation } from 'react-router-dom';\nimport { RegistryComponent } from '@genx/react';\n\nconst Navigator = ({ _registry, layout, routes, initialPath, path = '/' }) => {\n    let hasIndex = false;\n\n    const elRoutes = routes.map((node) => {\n        if (node.path === '/') {\n            hasIndex = true;\n        }\n\n        if (node.routes) {\n            return (\n                <Navigator _registry={_registry} key={node.path} {...node} />\n            );\n        }\n\n        return (\n            <Route\n                key={node.path}\n                path={node.path}\n                element={\n                    node.redirectTo ? (\n                        <Navigate to={node.redirectTo} />\n                    ) : (\n                        <RegistryComponent\n                            _name={node.name || node.component}\n                            _registry={_registry}\n                        />\n                    )\n                }\n            />\n        );\n    });\n\n    return layout ? (\n        <Route\n            path={path}\n            element={<RegistryComponent _name={node.name || layout} _registry={_registry} />}\n        >\n            {elRoutes}\n            {!hasIndex && initialPath && (\n                <Route\n                    path=\"/\"\n                    element={<Navigate to={initialPath} replace />}\n                />\n            )}\n        </Route>\n    ) : (\n        <>{elRoutes}</>\n    );\n};\n\nexport const RootNavigator = ({ onLocationChange, ...props }) => {\n    const isInitial = useRef(true);\n    const location = useLocation();\n\n    useEffect(() => {\n        onLocationChange && onLocationChange(location, isInitial.current);\n        if (isInitial.current) {\n            isInitial.current = false;\n        }\n    }, [location, onLocationChange]);\n\n    return (\n        <Routes>\n            <Navigator {...props} />\n        </Routes>\n    );\n};\n\nexport default Navigator;\n"]}