{"version":3,"sources":["Navigator.js"],"names":["React","useEffect","useRef","Routes","Route","useLocation","RegistryComponent","Navigator","_registry","layout","routes","initialPath","path","hasIndex","elRoutes","map","node","redirectTo","name","component","RootNavigator","onLocationChange","props","isInitial","location","current"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,QAAyC,OAAzC;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,WAAxB,QAA2C,kBAA3C;AACA,SAASC,iBAAT,QAAkC,aAAlC;;AAEA,MAAMC,SAAS,GAAG,CAAC;AAAEC,EAAAA,SAAF;AAAaC,EAAAA,MAAb;AAAqBC,EAAAA,MAArB;AAA6BC,EAAAA,WAA7B;AAA0CC,EAAAA,IAAI,GAAG;AAAjD,CAAD,KAA4D;AAC1E,MAAIC,QAAQ,GAAG,KAAf;AAEA,QAAMC,QAAQ,GAAGJ,MAAM,CAACK,GAAP,CAAYC,IAAD,IAAU;AAClC,QAAIA,IAAI,CAACJ,IAAL,KAAc,GAAlB,EAAuB;AACnBC,MAAAA,QAAQ,GAAG,IAAX;AACH;;AAED,QAAIG,IAAI,CAACN,MAAT,EAAiB;AACb,0BACI,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAEF,SAAtB;AAAiC,QAAA,GAAG,EAAEQ,IAAI,CAACJ;AAA3C,SAAqDI,IAArD,EADJ;AAGH;;AAED,wBACI,oBAAC,KAAD;AACI,MAAA,GAAG,EAAEA,IAAI,CAACJ,IADd;AAEI,MAAA,IAAI,EAAEI,IAAI,CAACJ,IAFf;AAGI,MAAA,OAAO,EACHI,IAAI,CAACC,UAAL,gBACI,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAED,IAAI,CAACC;AAAnB,QADJ,gBAGI,oBAAC,iBAAD;AACI,QAAA,KAAK,EAAED,IAAI,CAACE,IAAL,IAAaF,IAAI,CAACG,SAD7B;AAEI,QAAA,SAAS,EAAEX;AAFf;AAPZ,MADJ;AAgBH,GA3BgB,CAAjB;AA6BA,SAAOC,MAAM,gBACT,oBAAC,KAAD;AACI,IAAA,IAAI,EAAEG,IADV;AAEI,IAAA,OAAO,eAAE,oBAAC,iBAAD;AAAmB,MAAA,KAAK,EAAEI,IAAI,CAACE,IAAL,IAAaT,MAAvC;AAA+C,MAAA,SAAS,EAAED;AAA1D;AAFb,KAIKM,QAJL,EAKK,CAACD,QAAD,IAAaF,WAAb,iBACG,oBAAC,KAAD;AACI,IAAA,IAAI,EAAC,GADT;AAEI,IAAA,OAAO,eAAE,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAEA,WAAd;AAA2B,MAAA,OAAO;AAAlC;AAFb,IANR,CADS,gBAcT,0CAAGG,QAAH,CAdJ;AAgBH,CAhDD;;AAkDA,OAAO,MAAMM,aAAa,GAAG,CAAC;AAAEC,EAAAA,gBAAF;AAAoB,KAAGC;AAAvB,CAAD,KAAoC;AAC7D,QAAMC,SAAS,GAAGrB,MAAM,CAAC,IAAD,CAAxB;AACA,QAAMsB,QAAQ,GAAGnB,WAAW,EAA5B;AAEAJ,EAAAA,SAAS,CAAC,MAAM;AACZoB,IAAAA,gBAAgB,IAAIA,gBAAgB,CAACG,QAAD,EAAWD,SAAS,CAACE,OAArB,CAApC;;AACA,QAAIF,SAAS,CAACE,OAAd,EAAuB;AACnBF,MAAAA,SAAS,CAACE,OAAV,GAAoB,KAApB;AACH;AACJ,GALQ,EAKN,CAACD,QAAD,EAAWH,gBAAX,CALM,CAAT;AAOA,sBACI,oBAAC,MAAD,qBACI,oBAAC,SAAD,EAAeC,KAAf,CADJ,CADJ;AAKH,CAhBM;AAkBP,eAAef,SAAf","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { Routes, Route, useLocation } from 'react-router-dom';\nimport { RegistryComponent } from '@genx/react';\n\nconst Navigator = ({ _registry, layout, routes, initialPath, path = '/' }) => {\n    let hasIndex = false;\n\n    const elRoutes = routes.map((node) => {\n        if (node.path === '/') {\n            hasIndex = true;\n        }\n\n        if (node.routes) {\n            return (\n                <Navigator _registry={_registry} key={node.path} {...node} />\n            );\n        }\n\n        return (\n            <Route\n                key={node.path}\n                path={node.path}\n                element={\n                    node.redirectTo ? (\n                        <Navigate to={node.redirectTo} />\n                    ) : (\n                        <RegistryComponent\n                            _name={node.name || node.component}\n                            _registry={_registry}\n                        />\n                    )\n                }\n            />\n        );\n    });\n\n    return layout ? (\n        <Route\n            path={path}\n            element={<RegistryComponent _name={node.name || layout} _registry={_registry} />}\n        >\n            {elRoutes}\n            {!hasIndex && initialPath && (\n                <Route\n                    path=\"/\"\n                    element={<Navigate to={initialPath} replace />}\n                />\n            )}\n        </Route>\n    ) : (\n        <>{elRoutes}</>\n    );\n};\n\nexport const RootNavigator = ({ onLocationChange, ...props }) => {\n    const isInitial = useRef(true);\n    const location = useLocation();\n\n    useEffect(() => {\n        onLocationChange && onLocationChange(location, isInitial.current);\n        if (isInitial.current) {\n            isInitial.current = false;\n        }\n    }, [location, onLocationChange]);\n\n    return (\n        <Routes>\n            <Navigator {...props} />\n        </Routes>\n    );\n};\n\nexport default Navigator;\n"]}