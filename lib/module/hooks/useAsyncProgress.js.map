{"version":3,"sources":["useAsyncProgress.js"],"names":["useCallback","useEffect","useAsyncCallback","useAsyncProgress","fn","deps","reloadable","state","callback","applyChange","loading","setProgress","progress"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,SAAtB,QAAuC,OAAvC;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AAEA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,gBAAT,CAA0BC,EAA1B,EAA8BC,IAA9B,EAAoCC,UAApC,EAAgD;AAC3D,QAAM,CAACC,KAAD,EAAQC,QAAR,EAAkBC,WAAlB,IAAiCP,gBAAgB,CACnDE,EADmD,EAEnDC,IAFmD,EAGnD;AAAEK,IAAAA,OAAO,EAAE;AAAX,GAHmD,EAInDJ,UAJmD,CAAvD;AAMA,QAAMK,WAAW,GAAGX,WAAW,CAC1BY,QAAD,IAAc;AACVH,IAAAA,WAAW,CAAC;AAAEG,MAAAA;AAAF,KAAD,CAAX;AACH,GAH0B,EAI3B,CAACH,WAAD,CAJ2B,CAA/B;AAOAR,EAAAA,SAAS,CAAC,MAAM;AACZO,IAAAA,QAAQ,CAACG,WAAD,CAAR;AACH,GAFQ,EAEN,CAACH,QAAD,EAAWG,WAAX,CAFM,CAAT;AAIA,SAAOJ,KAAP;AACH","sourcesContent":["import { useCallback, useEffect } from 'react';\nimport useAsyncCallback from './useAsyncCallback';\n\n/**\n * React hook that returns a state with shape { value, error, loading } of which the value is returned by an async function. Just like async version of useMemo.\n * @param {*} fn\n * @param {*} deps\n */\nexport default function useAsyncProgress(fn, deps, reloadable) {\n    const [state, callback, applyChange] = useAsyncCallback(\n        fn,\n        deps,\n        { loading: true },\n        reloadable\n    );\n    const setProgress = useCallback(\n        (progress) => {\n            applyChange({ progress });\n        },\n        [applyChange]\n    );\n\n    useEffect(() => {\n        callback(setProgress);\n    }, [callback, setProgress]);\n\n    return state;\n}\n"]}